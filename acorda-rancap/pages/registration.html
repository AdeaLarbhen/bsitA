<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-Merged Registration</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    
    <link rel="stylesheet" href="../styles/style4.css"/>
  
  </head>
  <body>
    
    <video id="video" poster="../assets/img.jpg" autoplay muted loop>
        <source src="../assets/videoplayback.mp4" type="video/mp4">
       </video>

    
<div class="container position-absolute top-50 start-50 translate-middle">
    <div class="row">
        <header>C - Merged Registration</header>
      
           <form action="" id="register_form" method="post" role="form" class="php-email-form">
               <div class="form first">
                   <div class="details personal">
                       <span class="title">Personal Details</span>
   
                       <div class="fields">
                           <div class="input-field">
                               <label for="fullname">Full Name</label>
                               <input type="text" name="fullname" id="flname" placeholder="Enter your name" required />
                           </div>
   
                           <div class="input-field">
                               <label for="birth">Date of Birth</label>
                               <input type="date" name="birth" id="birth" placeholder="Enter birth date" required />
                           </div>
   
                           <div class="input-field">
                               <label for="email">Email</label>
                               <input type="email" name="email" id="email" placeholder="Enter your email" required />
                           </div>
   
                           <div class="input-field">
                               <label for="number">Mobile Number</label>
                               <input type="text" name="number" id="mobile_num" placeholder="Enter mobile number" required />
                           </div>
   
                           <div class="input-field">
                               <label for="gender">Gender</label>
                               <select name="gender" required/>
                                   <option disabled selected>Gender :</option>
                                   <option>Male</option>
                                   <option>Female</option>
                                   <option>Others</option>
                               </select>
                           </div>

                       </div>
                   </div>
                   <div class="details address">
                    <span class="title">Address Details</span>

                    <div class="fields">
                        <div class="input-field">
                            <label for="street">Street No.</label>
                            <input type="text" name="street" id="street" placeholder="Enter Street No." required />
                        </div>

                        <div class="input-field">
                         <label for="municipality">Municipality</label>
                         <input type="text" name="municipality" id="municipality" placeholder="Enter Municipality" required />
                     </div>

                     <div class="input-field">
                         <label for="province">Province</label>
                         <input type="text" name="province" id="province" placeholder="Enter Province" required />
                     </div>

                    </div>
                </div>
                        
                        <button type="submit">
                          <span class="btnText">Submit</span>
                        </button>
                    </div>

                </form>
            </div>
        </div>   
      
     
      
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="main.js"></script>
    
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
    
    <script>
     const { createClient } = supabase
     supabase = createClient("https://oshjuleduvmnddaqivyr.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zaGp1bGVkdXZtbmRkYXFpdnlyIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTY3NjIxNjEsImV4cCI6MTk3MjMzODE2MX0._yjcfKCZWL87QGOU4QCQTJ44cUP52aTl_WxX7EytOtg")
        
          const form = document.querySelector('#register_form')
      form.addEventListener('submit', async (event) => {
          event.preventDefault()

          const formInputs = form.querySelectorAll('input, select')

          let submission = {}

          formInputs.forEach(element => {
            const { value, name } = element
            if (value) {
                submission[name] = value
            }
          })
         
          const { error, data } = await supabase.from('registers').insert([submission])
          

          if (error) {
              alert('There was an error please try again')
          } else {
              alert('You are registered.')
          }

          formInputs.forEach(element => element.value = '')

      })
    </script>
   
  </body>
</html>
